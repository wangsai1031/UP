# Linux 网络管理 - 网络配置文件

> 测试机为 Centos7

## 一、网卡信息文件

### 1. 文件位置

    /etc/sysconfig/network-scripts/ifcfg-*

* 实例
```
[vagrant@10 ~]$ ifconfig
eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 10.0.2.15  netmask 255.255.255.0  broadcast 10.0.2.255
        inet6 fe80::e096:3a76:6df1:bd6d  prefixlen 64  scopeid 0x20<link>
        ether 08:00:27:6b:57:88  txqueuelen 1000  (Ethernet)
        RX packets 952  bytes 85854 (83.8 KiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 621  bytes 73814 (72.0 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

eth1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.33.88  netmask 255.255.255.0  broadcast 192.168.33.255
        inet6 fe80::a00:27ff:fedb:788f  prefixlen 64  scopeid 0x20<link>
        ether 08:00:27:db:78:8f  txqueuelen 1000  (Ethernet)
        RX packets 62  bytes 4389 (4.2 KiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 18  bytes 2208 (2.1 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10<host>
        loop  txqueuelen 0  (Local Loopback)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

[vagrant@10 ~]$ ll /etc/sysconfig/network-scripts/ifcfg-*
-rw-r--r-- 1 root    root    168 Jul 14  2015 /etc/sysconfig/network-scripts/ifcfg-enp0s3
-rw-rw-r-- 1 vagrant vagrant 214 May 14 10:52 /etc/sysconfig/network-scripts/ifcfg-eth1
-rw-r--r-- 1 root    root    254 Jan  2 16:29 /etc/sysconfig/network-scripts/ifcfg-lo
[vagrant@10 ~]$ cat /etc/sysconfig/network-scripts/ifcfg-lo
DEVICE=lo
IPADDR=127.0.0.1
NETMASK=255.0.0.0
NETWORK=127.0.0.0
# If you're having problems with gated making 127.0.0.0/8 a martian,
# you can change this to something else (255.255.255.255, for example)
BROADCAST=127.255.255.255
ONBOOT=yes
NAME=loopback
[vagrant@10 ~]$ cat /etc/sysconfig/network-scripts/ifcfg-eth1
#VAGRANT-BEGIN
# The contents below are automatically generated by Vagrant. Do not modify.
NM_CONTROLLED=yes
BOOTPROTO=none
ONBOOT=yes
IPADDR=192.168.33.88
NETMASK=255.255.255.0
DEVICE=eth1
PEERDNS=no
#VAGRANT-END
[vagrant@10 ~]$ cat /etc/sysconfig/network-scripts/ifcfg-enp0s3
# Generated by dracut initrd
NAME="enp0s3"
DEVICE="enp0s3"
ONBOOT=yes
NETBOOT=yes
UUID="8924a5b0-f9f4-453b-910d-118a91dac1ec"
IPV6INIT=yes
BOOTPROTO=dhcp
TYPE=Ethernet
```

### 2. 配置详解

配置|描述
-|-
DEVICE|网卡设备名
BOOTPROTO|是否使用dhcp(动态主机配置协议)，可选值：none,static,dhcp
HWADDR|MAC地址
NM_CONTROLLED|是否启用Network Manager图形管理工具，建议 no
ONBOOT|是否默认启动网卡
TYPE|网络类型（Ethernet:以太网）
UUID|网卡唯一识别码
*IPADDR|IP地址
*NETMASK|子网掩码
*GATEWAY|网关
*DNS1|DNS
IPV6INIT|是否启用IPv6
USERCTL|是否允许非root用户控制此网卡

* 当 `BOOTPROTO` 为 `dhcp` 时，标 `*` 的项会自动获取，不需要填写。

## 二、主机名文件

### 1. 文件位置

    /etc/sysconfig/network

### 2. 配置详解

配置|描述
-|-
NETWORKING|是否使用网络
NETWORKING_IPV6|是否支持IPv6
HOSTNAME|主机名

## 三、DNS配置文件

### 1. 文件位置

    /etc/resolv.conf

* 实例
```
[vagrant@10 ~]$ cat /etc/resolv.conf
# Generated by NetworkManager
nameserver 10.0.2.3
```

### 2. 配置详解

配置|描述
-|-
nameserver|定义DNS服务器的IP地址
domain|定义本地域名
search|定义域名的搜索列表


* 最主要是nameserver关键字，如果没指定nameserver就找不到DNS服务器，其它关键字是可选的。 
nameserver表示解析域名时使用该地址指定的主机为域名服务器。其中域名服务器是按照文件中出现的顺序来查询的,且只有当第一个nameserver没有反应时才查询下面的nameserver，一般不要指定超过3个服务器。

* domain声明主机的域名 很多程序用到它，如邮件系统；当为没有域名的主机进行DNS查询时，也要用到。如果没有域名，主机名将被使用，删除所有在第一个点( .)前面的内容。

* search它的多个参数指明域名查询顺序 当要查询没有域名的主机，主机将在由search声明的域中分别查找。 
domain和search不能共存；如果同时存在，后面出现的将会被使用。

## 四、私有IP对应的主机名


### 1. 文件位置

    /etc/hosts

* 实例
```
[vagrant@10 ~]$ cat /etc/hosts
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6

127.0.0.1 user.bluelive.o
127.0.0.1 task.bluelive.o
127.0.0.1 ad.bluelive.o
```

### 2. 配置详解

    私有IP 主机名 别名
